% Auto-generated by stereoCalibrator app on 31-Mar-2020
%-------------------------------------------------------


% Define images to process
imageFileNames1 = {
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_17_59_59_302160_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_01_35_155619_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_01_37_169478_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_01_44_037783_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_01_49_596559_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_04_01_389473_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_04_17_024900_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_04_24_864159_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_04_29_401812_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_04_31_766852_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_05_21_451309_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_05_24_184720_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_05_27_439815_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_05_32_036666_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_05_38_187596_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_05_39_909945_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_05_42_897045_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_05_46_770462_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_05_50_315095_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_05_59_064950_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_06_03_283472_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_06_08_513155_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_06_13_630176_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_06_23_461028_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_06_27_587148_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_06_33_669230_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/leftResized/2020_03_31_18_06_46_813723_leftResized.jpg',...
    };
imageFileNames2 = {'/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_17_59_59_302160_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_01_35_155619_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_01_37_169478_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_01_44_037783_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_01_49_596559_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_04_01_389473_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_04_17_024900_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_04_24_864159_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_04_29_401812_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_04_31_766852_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_05_21_451309_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_05_24_184720_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_05_27_439815_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_05_32_036666_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_05_38_187596_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_05_39_909945_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_05_42_897045_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_05_46_770462_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_05_50_315095_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_05_59_064950_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_06_03_283472_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_06_08_513155_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_06_13_630176_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_06_23_461028_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_06_27_587148_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_06_33_669230_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set001/rightResized/2020_03_31_18_06_46_813723_rightResized.jpg',...
    };


% Detect checkerboards in images
[imagePoints, boardSize, imagesUsed] = detectCheckerboardPoints(imageFileNames1, imageFileNames2);


% Generate world coordinates of the checkerboard keypoints
squareSize = 35;  % in units of 'millimeters'
worldPoints = generateCheckerboardPoints(boardSize, squareSize);

% Read one of the images from the first stereo pair
I1 = imread(imageFileNames1{1});
[mrows, ncols, ~] = size(I1);

% Calibrate the camera
[stereoParamsLeftAndRight, pairsUsed, estimationErrors] = estimateCameraParameters(imagePoints, worldPoints, ...
    'EstimateSkew', false, 'EstimateTangentialDistortion', false, ...
    'NumRadialDistortionCoefficients', 2, 'WorldUnits', 'millimeters', ...
    'InitialIntrinsicMatrix', [], 'InitialRadialDistortion', [], ...
    'ImageSize', [mrows, ncols]);

% View reprojection errors
h1=figure; showReprojectionErrors(stereoParamsLeftAndRight);

% Visualize pattern locationsleftAnd
h2=figure; showExtrinsics(stereoParamsLeftAndRight, 'CameraCentric');

% Display parameter estimation errors
displayErrors(estimationErrors, stereoParamsLeftAndRight);

% You can use the calibration data to rectify stereo images.
I2 = imread(imageFileNames2{1});
[J1, J2] = rectifyStereoImages(I1, I2, stereoParamsLeftAndRight);

% Saving Data Products 
leftImagePoints = imagePoints(:,:,:,1);
rightImagePoints= imagePoints(:,:,:,2);

save('dataFiles/DF_002_visualJetson001_Set1_2020_03_31')
save('dataFiles/DF_002_visualParametorsJetson001_Set1_2020_03_31','stereoParamsLeftAndRight')
save('dataFiles/DF_002_pythonVisualJetson001_Set1_2020_03_31',...
        'imageFileNames1','imageFileNames2',...
        'imagePoints','leftImagePoints','rightImagePoints'...
        )