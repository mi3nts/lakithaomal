% Auto-generated by stereoCalibrator app on 30-Mar-2020
%-------------------------------------------------------


% Define images to process
imageFileNames1 = {...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_54_15_579861_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_54_28_678132_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_54_42_542198_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_54_47_647564_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_54_51_514757_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_54_56_276293_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_55_01_670386_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_55_05_660695_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_55_09_040717_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_55_13_711706_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_55_18_990423_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_55_26_485430_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_55_27_855261_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_55_33_430285_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_55_34_788295_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_19_55_39_971535_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_20_09_16_825987_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_20_09_18_378426_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_20_09_24_324502_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_20_09_37_704568_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_20_09_49_625352_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_20_09_55_277628_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_20_10_00_822102_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_20_10_29_144337_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_20_22_25_782159_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_20_22_34_313166_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_20_23_05_505157_leftResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/leftResized/2020_03_29_20_23_20_532294_leftResized.jpg',...
    };
imageFileNames2 = {...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_54_15_579861_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_54_28_678132_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_54_42_542198_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_54_47_647564_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_54_51_514757_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_54_56_276293_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_55_01_670386_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_55_05_660695_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_55_09_040717_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_55_13_711706_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_55_18_990423_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_55_26_485430_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_55_27_855261_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_55_33_430285_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_55_34_788295_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_19_55_39_971535_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_20_09_16_825987_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_20_09_18_378426_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_20_09_24_324502_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_20_09_37_704568_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_20_09_49_625352_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_20_09_55_277628_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_20_10_00_822102_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_20_10_29_144337_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_20_22_25_782159_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_20_22_34_313166_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_20_23_05_505157_rightResized.jpg',...
    '/home/teamlary/mintsData/jetson001Set000/rightResized/2020_03_29_20_23_20_532294_rightResized.jpg',...
    };

% Detect checkerboards in images
[imagePoints, boardSize, imagesUsed] = detectCheckerboardPoints(imageFileNames1, imageFileNames2);


% Generate world coordinates of the checkerboard keypoints
squareSize = 35;  % in units of 'millimeters'
worldPoints = generateCheckerboardPoints(boardSize, squareSize);

% Read one of the images from the first stereo pair
I1 = imread(imageFileNames1{1});
[mrows, ncols, ~] = size(I1);

% Calibrate the camera
[stereoParamsLeftAndRight, pairsUsed, estimationErrors] = estimateCameraParameters(imagePoints, worldPoints, ...
    'EstimateSkew', false, 'EstimateTangentialDistortion', false, ...
    'NumRadialDistortionCoefficients', 2, 'WorldUnits', 'millimeters', ...
    'InitialIntrinsicMatrix', [], 'InitialRadialDistortion', [], ...
    'ImageSize', [mrows, ncols]);

% View reprojection errors
h1=figure; showReprojectionErrors(stereoParamsLeftAndRight);

% Visualize pattern locationsleftAnd
h2=figure; showExtrinsics(stereoParamsLeftAndRight, 'CameraCentric');

% Display parameter estimation errors
displayErrors(estimationErrors, stereoParamsLeftAndRight);

% You can use the calibration data to rectify stereo images.
I2 = imread(imageFileNames2{1});
[J1, J2] = rectifyStereoImages(I1, I2, stereoParamsLeftAndRight);

% Saving Data Products 
leftImagePoints= imagePoints(:,:,:,1);
rightImagePoints= imagePoints(:,:,:,2);

save('DF_002_dataFiles/DF_001_visualJetson001_2020_03_29')
save('DF_002_dataFiles/DF_001_visualParametorsJetson001_2020_03_29','stereoParamsLeftAndRight')
save('DF_002_dataFiles/DF_001_pythonThermalJetson001_2020_03_29',...
        'imageFileNames1','imageFileNames2',...
        'imagePoints','leftImagePoints','rightImagePoints'...
        )
% close all
